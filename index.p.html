<!-- template: neutral  -->
<body>
  <main class="ForestLayer World">
    <div class="WorldName">
      <br>
      <h1 class="WorldName-text">
        &lt;h1&gt;
        <br>
        dumpling.love
        <br>
        &lt;/h1&gt;
      </h1>
    </div>

    <div class="WorldHack" id="toggle-dev">
      <img
        src="./forest/images/wordhack.png"
        alt="a person holding two computer punch cards like in the good old computer times"
      >
    </div>

    <a-dumpling layer="play" title="the park" w="50" h="50">
      <div class="WorldForest">
        <img
          class="WorldForest-link"
          src="/images/dumpling-gameplay.gif"
          alt="a sped up animation of someone doing an asmr let's play of the videog ame dumpling.love"
        >

        <button class="WorldForest-link">
          wanna go on a walk with me?
        </button>
      </div>
    </a-dumpling>

    <a-dumpling title="welcome" >
      <div class="Dialog-text">
        hello web user
      </div>
    </a-dumpling>
  </main>

  <s-cript target="assistant">
    --- click
    what was that?! i don't understand this place. {it's me|this is the web}
    i can't see you, friend. {Cancel}
    ==> click
  </s-cript>
</body>

<style>
  body {
    margin: 0;
  }

  /* -- World -- */
  .World {
    position: relative;
    width: 3000px;
    height: 3000px;
    background:
      url(/sky/sky-lofi/annharbor.png),
      url(/sky/sky-lofi/brasilia.png),
      url(/sky/sky-lofi/california.png),
      url(/sky/sky-lofi/canberra.png),
      url(/sky/sky-lofi/chicago.png),
      url(/sky/sky-lofi/greenwitch.png)
    ;
    background-blend-mode: darken;
    /* background-position-x: -5%, 10%, 90%, 20%, 35%, 30%, 5%; */
    background-color: #decda4;
  }

  /* -- World/Name -- */
  .WorldName {
    position: absolute;
    width: 600px;
    height: 357px;
    top: 0;
    left: 0;
    background: url(/sky/cloud.png);
    background: #d3d282;
    background-size: auto;
    background-size: cover;
    border: 10px double;
    mix-blend-mode: lighten;
  }

  .WorldName-text {
    margin: 44px;
    margin-top: 14px;
    font-size: 76px;
    text-shadow: -1px -1px 0 #00f3ff, 1px -1px 0 #ff0303, -1px 1px 0 #afff00, 1px 1px 0 #fc00a5;
  }

  /* -- World/Forest -- */
  .WorldForest {
    height: 100%;
  }

  .WorldForest img {
    width: 100%;
    object-fit: contain;
    object-position: top left;
    cursor: zoom-in;
  }

  .WorldForest button {
    cursor: pointer;
    margin-top: 10px;
    transform: translateX(69px);
  }

  .WorldHack {
    font-size: 20px;
    cursor: pointer;
    color: #D3D2A4;
    position: absolute;
    bottom: 0px;
    width: 420px;
  }

  .WorldHack img {
    display: block;
  }
</style>

<script type="module">
  import { Inventory } from "./forest/inventory.js"

  // -- deps --
  const mInventory = Inventory.get()

  // -- elements --
  const $dev = document.getElementById("toggle-dev")
  const $forestLinks = document.getElementsByClassName("WorldForest-link")

  // -- init --
  mInventory.load()

  for (const $link of $forestLinks) {
    $link.addEventListener("click", OnForestClicked)
  }

  // how do you add this stuff to the inventory proper??
  $dev.addEventListener("click", OnDevToggleClicked)

  // -- events --
  // TODO: a tag that looks like a button (so they can can link w/o hoops)
  function OnForestClicked() {
    navigate("welcome.html")
  }

  function OnDevToggleClicked() {
    mInventory.addNamed("devcommentary", {
      w: 80,
      h: 50,
      temperament: "phlegmatic",
    }, false)
  }

  // function OnDevCommentaryChanged() {
  //   if (d.State.hasDevcommentary) {
  //     document.getElementById("devthanks").hide()
  //     return
  //   }

  //   mInventory.addNamed("devthanks", {
  //     "w": 69, "h": 69,
  //     "temperament": "choleric",
  //     "no-back": true,
  //     "no-close": true,
  //   })
  // }
</script>
