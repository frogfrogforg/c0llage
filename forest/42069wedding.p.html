<!-- template: neutral -->
<body>
  <main id="scroll-container" class="Wedding">
    <img class="Wedding-background" src="./images/42069wedding.jpg">

    <audio id="wedding-music" style="display: none">
      <source src="./sound/wedding/wedding.mp3" type="audio/mpeg">
    </audio>
  </main>
</body>

<style>
  #scroll-container {
    overflow: hidden;
    width: 100vw;
    height: 100vh;
    cursor: grab;
  }

  .Wedding-background {
    display: block;
    width: 10000px;
    pointer-events: none;
  }
</style>

<script type="module">
  // -- props --
  let $el = null
  let $music = null

  // -- init --
  function Main() {
    $el = document.getElementById("scroll-container")
    $music = document.getElementById("wedding-music")
    initTouch()
  }

  // -- touch --
  let isTouching = false
  let xi = null
  let yi = null

  function initTouch() {
    $el.addEventListener("pointerdown", didStartTouch)
    $el.addEventListener("pointermove", didMoveTouch)
    $el.addEventListener("pointerup", didEndTouch)

    const $html = document.querySelector("html")
    $html.addEventListener("pointerout", (evt) => {
      if (evt.target == $html) {
        didEndTouch()
      }
    })
  }

  function didStartTouch(evt) {
    isTouching = true
    xi = evt.clientX
    yi = evt.clientY
    $music.play()
  }

  function didMoveTouch(evt) {
    if (!isTouching) {
      return
    }

    const x = evt.clientX
    const y = evt.clientY

    const dx = x - xi
    const dy = y - yi

    $el.scrollBy({
      left: -dx,
      top: -dy
    })

    xi = x
    yi = y
  }

  function didEndTouch() {
    isTouching = false
    $music.pause()
  }

  // -- bootstrap --
  Main()
</script>