<style>
    .InvertedFrame {
        background-color: #cca81d;
        color: blanchedalmond;
        font-size: 30px;
    }

    .frog-dialogue {
        background-color: bisque;
        color: indigo;
        font-size: 16px;
        overflow-y: scroll;
    }

    #frames {
        position: absolute;
    }

    #honeybee {
        border: none;
        filter: blur(0.5px);
        /* thanks mut */
        pointer-events: none;
    }
</style>

<body>
    <img
        id="background"
        class="background"
        src="./images/person_on_computer.png"
        alt="you find yourself on top of a large log, deep in the woods. on the other end of the log there's a frog, deeply focused on its use of his computer. near the frog there's a beautiful picture frame of what look like a stack of tiny frogs on top of a bigger frog, the word love is written in bright magenta. you should not interrupt the frog. around you there are honeybees, they are very gigantic!!"
    >

    <c-picky wants='stoleFrogFrame'>
        <img id="background2" class="background" src="./images/person_on_computer-nophoto.png">
    </c-picky>

    <a
        class="hotspot cursor-inspect"
        href="./8messy_server_transition.html"
        style="left: 1.5%; top: 14.450%; width: 22.034%; height: 22.011%"
        title="the deeper path|beyond you there's a path deeper to the woods"
    ></a>

    <c-picky wants='stealthy'>
        <button class="hotspot cursor-spy" onclick="stealFrame()"
            style="left: 58.5%; top: 38.45%; width: 9.034%; height: 9.011%;"></button>
    </c-picky>

    <a
        class="hotspot cursor-move"
        href="./1.html" style="left: -1%; top: 72.345%; width: 26.125%; height: 26.176%"
        title="a path behind you"
        ></a>

    <button class="hotspot centered cursor-talk" onclick="Frames.toggle('rude')"
        style="left: 70.114%; top: 40.604%; width: 13.626%; height: 20.160%" data-turbo="false"></button>

    <a-dumpling
        id="rude"
        title='frog'
        x=40 y=15
        w=70 h=40
        bodyClass="InvertedFrame"
        hidden
    >
        <span class="d-internal">
            Don't <a href="#" onclick="Frames.show('more-rude')">be rude</a>, they are using <a href="#" onclick="Frames.show('the-computer')">the computer</a>
        </span>
    </a-dumpling>

    <a-dumpling id="the-computer" title='the computer' hidden permanent x=60 y=28 width=25 height=35>
        <d-iframe src="https://archive.org/embed/NicholasFedorovTHECOMPUTEROfficialVideo&autoplay=1" width="640"
            height="480" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen>
        </d-iframe>
    </a-dumpling>

    <a-dumpling id="frog-family" temperament='sanguine' title='family' hidden permanent x=60 y=28 width=25 height=35>
        <div>
            <img style='width: 100%; height: 100%' src='./images/family.jpg'>
        </div>
    </a-dumpling>

    <a-dumpling id="more-rude" hidden x=40 y=30 width=50 height=35 bodyClass="frog-dialogue">
        <div class="Dialog-text">
            <p class="d-internal">the frog looks you in the eye & frowns</p>
            <p>"Please leave me alone. We don't get internet back at the <span class='cosmodrome'>Cosmodrome</span>. Between taking
                care of my kids and
                my mother, this is the one hour a week that I get to see what my friends are up to."</p>
        </div>
    </a-dumpling>

    <iframe id="honeybee" disable-randomization=true class="background" src="/games/honeybee/web-build/honeybee.html"></iframe>

    <s-cript target="assistant">
        --- click
        I actually know this guy from way back. We don't hang out much any more. {oh|that's unfortunate}
        ==> click
    </s-cript>

</body>

<script>
    window.stealFrame = function () {
        Frames.show('frog-family')
        d.State.stoleFrogFrame = true
    }
</script>

<script type="module">
    let main = document.getElementById("main");
    let honeybee = document.getElementById("honeybee");
    honeybee.contentWindow.addEventListener('unity-loaded', () => {
        let canvas = honeybee.contentDocument.getElementById("unity-canvas");

        ['click', 'mouseenter', 'mouseleave',
            'mouseout', 'mouseover', 'mousemove',
            'mousedown', 'mouseup'].forEach((eventName) => {
                document.addEventListener(eventName, function (e) {
                    const rect = honeybee.getBoundingClientRect();
                    // let e2 = new e.constructor(e.type, e);
                    let e2 = new MouseEvent(e.type, {
                        // Adjust client coordinates to be relative to the iframe document:
                        clientX: e.clientX - rect.x,
                        clientY: e.clientY - rect.y,
                        // Everything else stays the same:
                        screenX: e.screenX,
                        screenY: e.screenY,
                        region: e.region,
                        relatedTarget: e.relatedTarget,
                        composed: e.composed,
                        view: e.view,
                        bubbles: e.bubbles,
                        cancelable: e.cancelable
                    });

                    canvas.dispatchEvent(e2);
                });
            })

        // Override the setpointer callback from unity to set both the pointer style and pointerEvents
        honeybee.contentWindow.setUnityPointer = (pointer) => {
            canvas.style.cursor = pointer ? "pointer" : "default"
            honeybee.style.pointerEvents = pointer ? "all" : "none"
        }
    })
</script>