<style>
    .mapRequestButton {
        text-align: center;
        width: 90%;
        height: 20%;
    }
</style>

<body>
    <img class="background" src="./images/19.png">

    <button class="hotspot centered cursor-inspect" onclick="goToOtherSide()"
        style="left: 95.888%; top: 54.666%; width: 8%; height: 90%"></button>

    <div style="position:absolute;width:auto;top:42%;left:27%;transform:rotate(1deg);"><a class="cursor-talk"
            onclick="startWizardConversation()">
            <img src="./images/Wizard.png" width="40%">
    </div>

    <a class="hotspot cursor-window" href="./15waterfromfar.html"
        style="left: 1.888%; top: 13.666%; width: 9.555%; height: 32.222%;"></a>
    <a class="hotspot cursor-cow" href="./25cow_love.html"
        style="left: 46.888%; top: 27.666%; width: 9.555%; height: 9.222%;"></a>

    <a class="hotspot cursor-move" href="./6messy_server_screen.html"
        style="left: 0%; top: 95%; width: 100%; height: 9.222%;"></a>

    <a-dumpling hidden id="halt" x=40 y=15 width=70 height=40 bodyClass="InvertedFrame">
        <span style="font-family: cursive;">don't worry about it. <br>i have it under control.<br>(∩ ͡~
            ͜ʖ ͡°)⊃━☆ﾟ. *</span>
        <span>aaaaa</span>
    </a-dumpling>

    <a-dumpling hidden id="dialog" x=10 y=69 width=70 height=30 bodyClass="InvertedFrame">
        <span id='tired' style="font-family: cursive;">Why are you in my house!?</span><br>
        <button class="continueButton" onclick="Frames.show('continue')">cuz</button>
    </a-dumpling>

    <a-dumpling hidden id="continue" x=10 y=75 width=70 height=30 bodyClass="InvertedFrame">
        <span id='next' style="font-family: cursive;">Well...! Get out! I'm late for a <i>very important</i>
            date!!</span><br>
        <button class="continueButton" onclick="Frames.show('continue2')">sounds hot</button>
    </a-dumpling>

    <a-dumpling hidden id="continue2" x=10 y=80 width=70 height=30 bodyClass="InvertedFrame">
        <span id='next' style="font-family: cursive;">I! Well— I mean... Well! I, uh... Well!! I!! Should hope
            so!!</span><br>
        <button class="continueButton" onclick="Frames.show('continue')">wait what's going on</button>
    </a-dumpling>

    <a-dumpling hidden id="waited" x=50 y=60 width=40 height=40 bodyClass="InvertedFrame">
        <span style="font-family: cursive;">Whatever! What'll it take to get you out of my hair? And don't ask for magic
            beans, I ran out last week.</span>
        <br>
        <button class="mapRequestButton" onclick="Frames.show('wizardMap'); d.State.gotMapFromWizard = true">A
            MAP!</button>
    </a-dumpling>

    <a-dumpling persistent hidden id="wizardMap" x=70 y=20 width=20 height=30>
        <d-iframe src="/sitemap/map.html">
        </d-iframe>
    </a-dumpling>
</body>

<script type="module">
    import * as Turbo from "/lib/@hotwired/turbo@7.0.0-beta.4.js"
    var initiatedConversation = false
    var wizardTimerSeconds = 10

    window.startWizardConversation = function () {
        Frames.toggle('dialog')
        if (!initiatedConversation) {
            setTimeout(wizardTimeout, wizardTimerSeconds * 1000)
            initiatedConversation = true
        }
    }


    function wizardTimeout() {
        Frames.show('waited')
    }

    window.goToOtherSide = function () {
        if (d.State.stealthy) {
            Turbo.visit("./20the_source")
        } else {
            Frames.show('halt')
        }
    }
</script>