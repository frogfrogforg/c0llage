<head>
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" href="../shared/frames.css">
    <script src="common.js"></script>
    <script type="module" src="../shared/draggable-frame.js"></script>
    <script type="module" src="../shared/d-iframe.js"></script>
    <script type="module">
        let state = JSON.parse(window.localStorage.state || '{"flags": []}')
        window.openNarrative = function() {
            if(!state.flags.includes('gotNarrative')) {
                state.flags.push('gotNarrative')
                localStorage.setItem("state", JSON.stringify(state))
            }
            Frames.toggle('narrative')
        }

        function saveState() {
            console.log("bye", JSON.stringify(state))
            localStorage.setItem("state", JSON.stringify(state))
            alert(" AAAAA")
        }

        window.onbeforeunload = saveState
    </script>
    <style>
        .CustomFrameBody {
            background-color: blue;
            font-size: 8em;
        }

        .CustomFrameBody a {
            color: yellow;
            text-decoration: none;
        }
    </style>
</head>

<body>
    <div class="container">
        <main class="content">
            <img class="background" src="./images/messyserver_screen.jpg">
            </img>

            <a class="hotspot inspect" href="#" onclick="openNarrative()"
                style="left: 22.27%; top: 21.61%; width: 44.49%; height: 37.32%">
            </a>
            <section id="frames" class="Frames">
                <draggable-frame hidden id="narrative" x=25 y=27.5 width=40 height=29>
                    <d-iframe autoload src="../../Jen/narrative.html"> </d-iframe>
                </draggable-frame>
                <draggable-frame temperament='sanguine' id="button" x=110 y=5 width=30 height=90
                    bodyClass="CustomFrameBody">
                    <a class="hotspot" href="./6messy_server_screen.html">
                        <div>
                            B
                        </div>
                        <div>
                            A
                        </div>
                        <div>
                            C
                        </div>
                        <div>
                            K
                        </div>
                    </a>
                </draggable-frame>
            </section>
        </main>
    </div>
</body>
