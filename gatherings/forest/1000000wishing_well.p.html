<body>
  <!-- credits: https://publicdomainpictures.net/pictures/40000/velka/wooden-wishing-well.jpg-->
  <img class="background" src="./images/wooden-wishing-well.jpg">

  <a class="hotspot cursor-move" href="./70outhouse.html" style="left: -10%; width: 120%; height: 15%; bottom: -5%;">
  </a>

  <button class="hotspot cursor-coin" onclick="Frames.show('well1')"
    style="left: 17%; top: 19%; width: 37%; height: 66%;"></button>

  <a-dumpling hidden title='a wishing well' id="well1" x=40 y=15 width=60 height=30>
    <div>
      <p>You found a wishing well! maybe all your dreams will now come true!</p>
      <c-picky condition="!hasQuarters">
        <p>Sadly, it appears that you have no <button onclick="Frames.show('quarterShop')">
            quarters
            </a>...</p>
      </c-picky>
      <c-picky condition="hasQuarters">
        <p>Thankfully, you have some quarters to spare!</p>
      </c-picky>
    </div>
  </a-dumpling>
  <a-dumpling hidden title='quarter shop' id="quarterShop" x=60 y=15 width=40 height=20>
    <div>
      <p>You found a wishing well! maybe all your dreams will now come true!</p>
      <input type="number" title="how much you paid" id="ammountPaid" value=2.30>
      <button id="exchange">exchange!</button>
    </div>
  </a-dumpling>

  <template id="coinDumplingTemplate">
    <a-dumpling no-close no-resize no-back persistent temperament="choleric" id="quarter" title="1/4" min-x=50 max-x=120
      min-y=50 max-y=90 width=20 height=20>
      <d-iframe autoload src='./items/quarter.html'></d-iframe>
    </a-dumpling>
  </template>

  <style>
    .quarter-image {
      width: 100%;
      height: 100%;
      cursor: grab;
    }
  </style>

  <script type="module">
    import { kInventory } from "./inventory.js"

    function main() {
      const coinDumplingTemplate = document.getElementById('coinDumplingTemplate').content.querySelector('a-dumpling')
      console.log(coinDumplingTemplate)
      document.getElementById('exchange').addEventListener('click', () => {
        const value = document.getElementById('ammountPaid').value
        const numCoins = Math.floor(value * 4)
        for (let i = 0; i < numCoins; i++) {
          // d.State.hasQuarters = true
          if (d.State.quarters) {
            d.State.quarters += 1
          } else {
            d.State.quarters = 1
          }

          const newElement = document.importNode(coinDumplingTemplate, true)
          newElement.id = newElement.id + d.State.quarters
          document.body.appendChild(newElement)
          console.log('coins: ', d.State.quarters)
        }
      })
    }
    main()
  </script>
</body>